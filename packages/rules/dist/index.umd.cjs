(function(P,ie){typeof exports=="object"&&typeof module<"u"?ie(exports):typeof define=="function"&&define.amd?define(["exports"],ie):(P=typeof globalThis<"u"?globalThis:P||self,ie(P.FlatanRule={}))})(this,function(P){"use strict";var ie=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ue=Math.ceil,Z=Math.floor,C="[BigNumber Error] ",Ne=C+"Number primitive has more than 15 significant digits: ",X=1e14,O=14,ce=9007199254740991,ae=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],J=1e7,$=1e9;function Oe(d){var h,p,R,E=g.prototype={constructor:g,toString:null,valueOf:null},A=new g(1),m=20,S=4,x=-7,G=21,Q=-1e7,H=1e7,K=!1,te=1,j=0,he={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},b="0123456789abcdefghijklmnopqrstuvwxyz",ge=!0;function g(e,r){var i,l,n,s,c,t,f,u,o=this;if(!(o instanceof g))return new g(e,r);if(r==null){if(e&&e._isBigNumber===!0){o.s=e.s,!e.c||e.e>H?o.c=o.e=null:e.e<Q?o.c=[o.e=0]:(o.e=e.e,o.c=e.c.slice());return}if((t=typeof e=="number")&&e*0==0){if(o.s=1/e<0?(e=-e,-1):1,e===~~e){for(s=0,c=e;c>=10;c/=10,s++);s>H?o.c=o.e=null:(o.e=s,o.c=[e]);return}u=String(e)}else{if(!ie.test(u=String(e)))return R(o,u,t);o.s=u.charCodeAt(0)==45?(u=u.slice(1),-1):1}(s=u.indexOf("."))>-1&&(u=u.replace(".","")),(c=u.search(/e/i))>0?(s<0&&(s=c),s+=+u.slice(c+1),u=u.substring(0,c)):s<0&&(s=u.length)}else{if(I(r,2,b.length,"Base"),r==10&&ge)return o=new g(e),F(o,m+o.e+1,S);if(u=String(e),t=typeof e=="number"){if(e*0!=0)return R(o,u,t,r);if(o.s=1/e<0?(u=u.slice(1),-1):1,g.DEBUG&&u.replace(/^0\.0*|\./,"").length>15)throw Error(Ne+e)}else o.s=u.charCodeAt(0)===45?(u=u.slice(1),-1):1;for(i=b.slice(0,r),s=c=0,f=u.length;c<f;c++)if(i.indexOf(l=u.charAt(c))<0){if(l=="."){if(c>s){s=f;continue}}else if(!n&&(u==u.toUpperCase()&&(u=u.toLowerCase())||u==u.toLowerCase()&&(u=u.toUpperCase()))){n=!0,c=-1,s=0;continue}return R(o,String(e),t,r)}t=!1,u=p(u,r,10,o.s),(s=u.indexOf("."))>-1?u=u.replace(".",""):s=u.length}for(c=0;u.charCodeAt(c)===48;c++);for(f=u.length;u.charCodeAt(--f)===48;);if(u=u.slice(c,++f)){if(f-=c,t&&g.DEBUG&&f>15&&(e>ce||e!==Z(e)))throw Error(Ne+o.s*e);if((s=s-c-1)>H)o.c=o.e=null;else if(s<Q)o.c=[o.e=0];else{if(o.e=s,o.c=[],c=(s+1)%O,s<0&&(c+=O),c<f){for(c&&o.c.push(+u.slice(0,c)),f-=O;c<f;)o.c.push(+u.slice(c,c+=O));c=O-(u=u.slice(c)).length}else c-=f;for(;c--;u+="0");o.c.push(+u)}}else o.c=[o.e=0]}g.clone=Oe,g.ROUND_UP=0,g.ROUND_DOWN=1,g.ROUND_CEIL=2,g.ROUND_FLOOR=3,g.ROUND_HALF_UP=4,g.ROUND_HALF_DOWN=5,g.ROUND_HALF_EVEN=6,g.ROUND_HALF_CEIL=7,g.ROUND_HALF_FLOOR=8,g.EUCLID=9,g.config=g.set=function(e){var r,i;if(e!=null)if(typeof e=="object"){if(e.hasOwnProperty(r="DECIMAL_PLACES")&&(i=e[r],I(i,0,$,r),m=i),e.hasOwnProperty(r="ROUNDING_MODE")&&(i=e[r],I(i,0,8,r),S=i),e.hasOwnProperty(r="EXPONENTIAL_AT")&&(i=e[r],i&&i.pop?(I(i[0],-$,0,r),I(i[1],0,$,r),x=i[0],G=i[1]):(I(i,-$,$,r),x=-(G=i<0?-i:i))),e.hasOwnProperty(r="RANGE"))if(i=e[r],i&&i.pop)I(i[0],-$,-1,r),I(i[1],1,$,r),Q=i[0],H=i[1];else if(I(i,-$,$,r),i)Q=-(H=i<0?-i:i);else throw Error(C+r+" cannot be zero: "+i);if(e.hasOwnProperty(r="CRYPTO"))if(i=e[r],i===!!i)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))K=i;else throw K=!i,Error(C+"crypto unavailable");else K=i;else throw Error(C+r+" not true or false: "+i);if(e.hasOwnProperty(r="MODULO_MODE")&&(i=e[r],I(i,0,9,r),te=i),e.hasOwnProperty(r="POW_PRECISION")&&(i=e[r],I(i,0,$,r),j=i),e.hasOwnProperty(r="FORMAT"))if(i=e[r],typeof i=="object")he=i;else throw Error(C+r+" not an object: "+i);if(e.hasOwnProperty(r="ALPHABET"))if(i=e[r],typeof i=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(i))ge=i.slice(0,10)=="0123456789",b=i;else throw Error(C+r+" invalid: "+i)}else throw Error(C+"Object expected: "+e);return{DECIMAL_PLACES:m,ROUNDING_MODE:S,EXPONENTIAL_AT:[x,G],RANGE:[Q,H],CRYPTO:K,MODULO_MODE:te,POW_PRECISION:j,FORMAT:he,ALPHABET:b}},g.isBigNumber=function(e){if(!e||e._isBigNumber!==!0)return!1;if(!g.DEBUG)return!0;var r,i,l=e.c,n=e.e,s=e.s;e:if({}.toString.call(l)=="[object Array]"){if((s===1||s===-1)&&n>=-$&&n<=$&&n===Z(n)){if(l[0]===0){if(n===0&&l.length===1)return!0;break e}if(r=(n+1)%O,r<1&&(r+=O),String(l[0]).length==r){for(r=0;r<l.length;r++)if(i=l[r],i<0||i>=X||i!==Z(i))break e;if(i!==0)return!0}}}else if(l===null&&n===null&&(s===null||s===1||s===-1))return!0;throw Error(C+"Invalid BigNumber: "+e)},g.maximum=g.max=function(){return ze(arguments,E.lt)},g.minimum=g.min=function(){return ze(arguments,E.gt)},g.random=function(){var e=9007199254740992,r=Math.random()*e&2097151?function(){return Z(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(i){var l,n,s,c,t,f=0,u=[],o=new g(A);if(i==null?i=m:I(i,0,$),c=ue(i/O),K)if(crypto.getRandomValues){for(l=crypto.getRandomValues(new Uint32Array(c*=2));f<c;)t=l[f]*131072+(l[f+1]>>>11),t>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),l[f]=n[0],l[f+1]=n[1]):(u.push(t%1e14),f+=2);f=c/2}else if(crypto.randomBytes){for(l=crypto.randomBytes(c*=7);f<c;)t=(l[f]&31)*281474976710656+l[f+1]*1099511627776+l[f+2]*4294967296+l[f+3]*16777216+(l[f+4]<<16)+(l[f+5]<<8)+l[f+6],t>=9e15?crypto.randomBytes(7).copy(l,f):(u.push(t%1e14),f+=7);f=c/7}else throw K=!1,Error(C+"crypto unavailable");if(!K)for(;f<c;)t=r(),t<9e15&&(u[f++]=t%1e14);for(c=u[--f],i%=O,c&&i&&(t=ae[O-i],u[f]=Z(c/t)*t);u[f]===0;u.pop(),f--);if(f<0)u=[s=0];else{for(s=-1;u[0]===0;u.splice(0,1),s-=O);for(f=1,t=u[0];t>=10;t/=10,f++);f<O&&(s-=O-f)}return o.e=s,o.c=u,o}}(),g.sum=function(){for(var e=1,r=arguments,i=new g(r[0]);e<r.length;)i=i.plus(r[e++]);return i},p=function(){var e="0123456789";function r(i,l,n,s){for(var c,t=[0],f,u=0,o=i.length;u<o;){for(f=t.length;f--;t[f]*=l);for(t[0]+=s.indexOf(i.charAt(u++)),c=0;c<t.length;c++)t[c]>n-1&&(t[c+1]==null&&(t[c+1]=0),t[c+1]+=t[c]/n|0,t[c]%=n)}return t.reverse()}return function(i,l,n,s,c){var t,f,u,o,a,w,N,L,v=i.indexOf("."),U=m,_=S;for(v>=0&&(o=j,j=0,i=i.replace(".",""),L=new g(l),w=L.pow(i.length-v),j=o,L.c=r(k(q(w.c),w.e,"0"),10,n,e),L.e=L.c.length),N=r(i,l,n,c?(t=b,e):(t=e,b)),u=o=N.length;N[--o]==0;N.pop());if(!N[0])return t.charAt(0);if(v<0?--u:(w.c=N,w.e=u,w.s=s,w=h(w,L,U,_,n),N=w.c,a=w.r,u=w.e),f=u+U+1,v=N[f],o=n/2,a=a||f<0||N[f+1]!=null,a=_<4?(v!=null||a)&&(_==0||_==(w.s<0?3:2)):v>o||v==o&&(_==4||a||_==6&&N[f-1]&1||_==(w.s<0?8:7)),f<1||!N[0])i=a?k(t.charAt(1),-U,t.charAt(0)):t.charAt(0);else{if(N.length=f,a)for(--n;++N[--f]>n;)N[f]=0,f||(++u,N=[1].concat(N));for(o=N.length;!N[--o];);for(v=0,i="";v<=o;i+=t.charAt(N[v++]));i=k(i,u,t.charAt(0))}return i}}(),h=function(){function e(l,n,s){var c,t,f,u,o=0,a=l.length,w=n%J,N=n/J|0;for(l=l.slice();a--;)f=l[a]%J,u=l[a]/J|0,c=N*f+u*w,t=w*f+c%J*J+o,o=(t/s|0)+(c/J|0)+N*u,l[a]=t%s;return o&&(l=[o].concat(l)),l}function r(l,n,s,c){var t,f;if(s!=c)f=s>c?1:-1;else for(t=f=0;t<s;t++)if(l[t]!=n[t]){f=l[t]>n[t]?1:-1;break}return f}function i(l,n,s,c){for(var t=0;s--;)l[s]-=t,t=l[s]<n[s]?1:0,l[s]=t*c+l[s]-n[s];for(;!l[0]&&l.length>1;l.splice(0,1));}return function(l,n,s,c,t){var f,u,o,a,w,N,L,v,U,_,T,B,le,pe,we,V,ne,z=l.s==n.s?1:-1,D=l.c,M=n.c;if(!D||!D[0]||!M||!M[0])return new g(!l.s||!n.s||(D?M&&D[0]==M[0]:!M)?NaN:D&&D[0]==0||!M?z*0:z/0);for(v=new g(z),U=v.c=[],u=l.e-n.e,z=s+u+1,t||(t=X,u=y(l.e/O)-y(n.e/O),z=z/O|0),o=0;M[o]==(D[o]||0);o++);if(M[o]>(D[o]||0)&&u--,z<0)U.push(1),a=!0;else{for(pe=D.length,V=M.length,o=0,z+=2,w=Z(t/(M[0]+1)),w>1&&(M=e(M,w,t),D=e(D,w,t),V=M.length,pe=D.length),le=V,_=D.slice(0,V),T=_.length;T<V;_[T++]=0);ne=M.slice(),ne=[0].concat(ne),we=M[0],M[1]>=t/2&&we++;do{if(w=0,f=r(M,_,V,T),f<0){if(B=_[0],V!=T&&(B=B*t+(_[1]||0)),w=Z(B/we),w>1)for(w>=t&&(w=t-1),N=e(M,w,t),L=N.length,T=_.length;r(N,_,L,T)==1;)w--,i(N,V<L?ne:M,L,t),L=N.length,f=1;else w==0&&(f=w=1),N=M.slice(),L=N.length;if(L<T&&(N=[0].concat(N)),i(_,N,T,t),T=_.length,f==-1)for(;r(M,_,V,T)<1;)w++,i(_,V<T?ne:M,T,t),T=_.length}else f===0&&(w++,_=[0]);U[o++]=w,_[0]?_[T++]=D[le]||0:(_=[D[le]],T=1)}while((le++<pe||_[0]!=null)&&z--);a=_[0]!=null,U[0]||U.splice(0,1)}if(t==X){for(o=1,z=U[0];z>=10;z/=10,o++);F(v,s+(v.e=o+u*O-1)+1,c,a)}else v.e=u,v.r=+a;return v}}();function Ee(e,r,i,l){var n,s,c,t,f;if(i==null?i=S:I(i,0,8),!e.c)return e.toString();if(n=e.c[0],c=e.e,r==null)f=q(e.c),f=l==1||l==2&&(c<=x||c>=G)?se(f,c):k(f,c,"0");else if(e=F(new g(e),r,i),s=e.e,f=q(e.c),t=f.length,l==1||l==2&&(r<=s||s<=x)){for(;t<r;f+="0",t++);f=se(f,s)}else if(r-=c,f=k(f,s,"0"),s+1>t){if(--r>0)for(f+=".";r--;f+="0");}else if(r+=s-t,r>0)for(s+1==t&&(f+=".");r--;f+="0");return e.s<0&&n?"-"+f:f}function ze(e,r){for(var i,l=1,n=new g(e[0]);l<e.length;l++)if(i=new g(e[l]),i.s)r.call(n,i)&&(n=i);else{n=i;break}return n}function de(e,r,i){for(var l=1,n=r.length;!r[--n];r.pop());for(n=r[0];n>=10;n/=10,l++);return(i=l+i*O-1)>H?e.c=e.e=null:i<Q?e.c=[e.e=0]:(e.e=i,e.c=r),e}R=function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,r=/^([^.]+)\.$/,i=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,n=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(s,c,t,f){var u,o=t?c:c.replace(n,"");if(l.test(o))s.s=isNaN(o)?null:o<0?-1:1;else{if(!t&&(o=o.replace(e,function(a,w,N){return u=(N=N.toLowerCase())=="x"?16:N=="b"?2:8,!f||f==u?w:a}),f&&(u=f,o=o.replace(r,"$1").replace(i,"0.$1")),c!=o))return new g(o,u);if(g.DEBUG)throw Error(C+"Not a"+(f?" base "+f:"")+" number: "+c);s.s=null}s.c=s.e=null}}();function F(e,r,i,l){var n,s,c,t,f,u,o,a=e.c,w=ae;if(a){e:{for(n=1,t=a[0];t>=10;t/=10,n++);if(s=r-n,s<0)s+=O,c=r,f=a[u=0],o=f/w[n-c-1]%10|0;else if(u=ue((s+1)/O),u>=a.length)if(l){for(;a.length<=u;a.push(0));f=o=0,n=1,s%=O,c=s-O+1}else break e;else{for(f=t=a[u],n=1;t>=10;t/=10,n++);s%=O,c=s-O+n,o=c<0?0:f/w[n-c-1]%10|0}if(l=l||r<0||a[u+1]!=null||(c<0?f:f%w[n-c-1]),l=i<4?(o||l)&&(i==0||i==(e.s<0?3:2)):o>5||o==5&&(i==4||l||i==6&&(s>0?c>0?f/w[n-c]:0:a[u-1])%10&1||i==(e.s<0?8:7)),r<1||!a[0])return a.length=0,l?(r-=e.e+1,a[0]=w[(O-r%O)%O],e.e=-r||0):a[0]=e.e=0,e;if(s==0?(a.length=u,t=1,u--):(a.length=u+1,t=w[O-s],a[u]=c>0?Z(f/w[n-c]%w[c])*t:0),l)for(;;)if(u==0){for(s=1,c=a[0];c>=10;c/=10,s++);for(c=a[0]+=t,t=1;c>=10;c/=10,t++);s!=t&&(e.e++,a[0]==X&&(a[0]=1));break}else{if(a[u]+=t,a[u]!=X)break;a[u--]=0,t=1}for(s=a.length;a[--s]===0;a.pop());}e.e>H?e.c=e.e=null:e.e<Q&&(e.c=[e.e=0])}return e}function Y(e){var r,i=e.e;return i===null?e.toString():(r=q(e.c),r=i<=x||i>=G?se(r,i):k(r,i,"0"),e.s<0?"-"+r:r)}return E.absoluteValue=E.abs=function(){var e=new g(this);return e.s<0&&(e.s=1),e},E.comparedTo=function(e,r){return ee(this,new g(e,r))},E.decimalPlaces=E.dp=function(e,r){var i,l,n,s=this;if(e!=null)return I(e,0,$),r==null?r=S:I(r,0,8),F(new g(s),e+s.e+1,r);if(!(i=s.c))return null;if(l=((n=i.length-1)-y(this.e/O))*O,n=i[n])for(;n%10==0;n/=10,l--);return l<0&&(l=0),l},E.dividedBy=E.div=function(e,r){return h(this,new g(e,r),m,S)},E.dividedToIntegerBy=E.idiv=function(e,r){return h(this,new g(e,r),0,1)},E.exponentiatedBy=E.pow=function(e,r){var i,l,n,s,c,t,f,u,o,a=this;if(e=new g(e),e.c&&!e.isInteger())throw Error(C+"Exponent not an integer: "+Y(e));if(r!=null&&(r=new g(r)),t=e.e>14,!a.c||!a.c[0]||a.c[0]==1&&!a.e&&a.c.length==1||!e.c||!e.c[0])return o=new g(Math.pow(+Y(a),t?e.s*(2-fe(e)):+Y(e))),r?o.mod(r):o;if(f=e.s<0,r){if(r.c?!r.c[0]:!r.s)return new g(NaN);l=!f&&a.isInteger()&&r.isInteger(),l&&(a=a.mod(r))}else{if(e.e>9&&(a.e>0||a.e<-1||(a.e==0?a.c[0]>1||t&&a.c[1]>=24e7:a.c[0]<8e13||t&&a.c[0]<=9999975e7)))return s=a.s<0&&fe(e)?-0:0,a.e>-1&&(s=1/s),new g(f?1/s:s);j&&(s=ue(j/O+2))}for(t?(i=new g(.5),f&&(e.s=1),u=fe(e)):(n=Math.abs(+Y(e)),u=n%2),o=new g(A);;){if(u){if(o=o.times(a),!o.c)break;s?o.c.length>s&&(o.c.length=s):l&&(o=o.mod(r))}if(n){if(n=Z(n/2),n===0)break;u=n%2}else if(e=e.times(i),F(e,e.e+1,1),e.e>14)u=fe(e);else{if(n=+Y(e),n===0)break;u=n%2}a=a.times(a),s?a.c&&a.c.length>s&&(a.c.length=s):l&&(a=a.mod(r))}return l?o:(f&&(o=A.div(o)),r?o.mod(r):s?F(o,j,S,c):o)},E.integerValue=function(e){var r=new g(this);return e==null?e=S:I(e,0,8),F(r,r.e+1,e)},E.isEqualTo=E.eq=function(e,r){return ee(this,new g(e,r))===0},E.isFinite=function(){return!!this.c},E.isGreaterThan=E.gt=function(e,r){return ee(this,new g(e,r))>0},E.isGreaterThanOrEqualTo=E.gte=function(e,r){return(r=ee(this,new g(e,r)))===1||r===0},E.isInteger=function(){return!!this.c&&y(this.e/O)>this.c.length-2},E.isLessThan=E.lt=function(e,r){return ee(this,new g(e,r))<0},E.isLessThanOrEqualTo=E.lte=function(e,r){return(r=ee(this,new g(e,r)))===-1||r===0},E.isNaN=function(){return!this.s},E.isNegative=function(){return this.s<0},E.isPositive=function(){return this.s>0},E.isZero=function(){return!!this.c&&this.c[0]==0},E.minus=function(e,r){var i,l,n,s,c=this,t=c.s;if(e=new g(e,r),r=e.s,!t||!r)return new g(NaN);if(t!=r)return e.s=-r,c.plus(e);var f=c.e/O,u=e.e/O,o=c.c,a=e.c;if(!f||!u){if(!o||!a)return o?(e.s=-r,e):new g(a?c:NaN);if(!o[0]||!a[0])return a[0]?(e.s=-r,e):new g(o[0]?c:S==3?-0:0)}if(f=y(f),u=y(u),o=o.slice(),t=f-u){for((s=t<0)?(t=-t,n=o):(u=f,n=a),n.reverse(),r=t;r--;n.push(0));n.reverse()}else for(l=(s=(t=o.length)<(r=a.length))?t:r,t=r=0;r<l;r++)if(o[r]!=a[r]){s=o[r]<a[r];break}if(s&&(n=o,o=a,a=n,e.s=-e.s),r=(l=a.length)-(i=o.length),r>0)for(;r--;o[i++]=0);for(r=X-1;l>t;){if(o[--l]<a[l]){for(i=l;i&&!o[--i];o[i]=r);--o[i],o[l]+=X}o[l]-=a[l]}for(;o[0]==0;o.splice(0,1),--u);return o[0]?de(e,o,u):(e.s=S==3?-1:1,e.c=[e.e=0],e)},E.modulo=E.mod=function(e,r){var i,l,n=this;return e=new g(e,r),!n.c||!e.s||e.c&&!e.c[0]?new g(NaN):!e.c||n.c&&!n.c[0]?new g(n):(te==9?(l=e.s,e.s=1,i=h(n,e,0,3),e.s=l,i.s*=l):i=h(n,e,0,te),e=n.minus(i.times(e)),!e.c[0]&&te==1&&(e.s=n.s),e)},E.multipliedBy=E.times=function(e,r){var i,l,n,s,c,t,f,u,o,a,w,N,L,v,U,_=this,T=_.c,B=(e=new g(e,r)).c;if(!T||!B||!T[0]||!B[0])return!_.s||!e.s||T&&!T[0]&&!B||B&&!B[0]&&!T?e.c=e.e=e.s=null:(e.s*=_.s,!T||!B?e.c=e.e=null:(e.c=[0],e.e=0)),e;for(l=y(_.e/O)+y(e.e/O),e.s*=_.s,f=T.length,a=B.length,f<a&&(L=T,T=B,B=L,n=f,f=a,a=n),n=f+a,L=[];n--;L.push(0));for(v=X,U=J,n=a;--n>=0;){for(i=0,w=B[n]%U,N=B[n]/U|0,c=f,s=n+c;s>n;)u=T[--c]%U,o=T[c]/U|0,t=N*u+o*w,u=w*u+t%U*U+L[s]+i,i=(u/v|0)+(t/U|0)+N*o,L[s--]=u%v;L[s]=i}return i?++l:L.splice(0,1),de(e,L,l)},E.negated=function(){var e=new g(this);return e.s=-e.s||null,e},E.plus=function(e,r){var i,l=this,n=l.s;if(e=new g(e,r),r=e.s,!n||!r)return new g(NaN);if(n!=r)return e.s=-r,l.minus(e);var s=l.e/O,c=e.e/O,t=l.c,f=e.c;if(!s||!c){if(!t||!f)return new g(n/0);if(!t[0]||!f[0])return f[0]?e:new g(t[0]?l:n*0)}if(s=y(s),c=y(c),t=t.slice(),n=s-c){for(n>0?(c=s,i=f):(n=-n,i=t),i.reverse();n--;i.push(0));i.reverse()}for(n=t.length,r=f.length,n-r<0&&(i=f,f=t,t=i,r=n),n=0;r;)n=(t[--r]=t[r]+f[r]+n)/X|0,t[r]=X===t[r]?0:t[r]%X;return n&&(t=[n].concat(t),++c),de(e,t,c)},E.precision=E.sd=function(e,r){var i,l,n,s=this;if(e!=null&&e!==!!e)return I(e,1,$),r==null?r=S:I(r,0,8),F(new g(s),e,r);if(!(i=s.c))return null;if(n=i.length-1,l=n*O+1,n=i[n]){for(;n%10==0;n/=10,l--);for(n=i[0];n>=10;n/=10,l++);}return e&&s.e+1>l&&(l=s.e+1),l},E.shiftedBy=function(e){return I(e,-ce,ce),this.times("1e"+e)},E.squareRoot=E.sqrt=function(){var e,r,i,l,n,s=this,c=s.c,t=s.s,f=s.e,u=m+4,o=new g("0.5");if(t!==1||!c||!c[0])return new g(!t||t<0&&(!c||c[0])?NaN:c?s:1/0);if(t=Math.sqrt(+Y(s)),t==0||t==1/0?(r=q(c),(r.length+f)%2==0&&(r+="0"),t=Math.sqrt(+r),f=y((f+1)/2)-(f<0||f%2),t==1/0?r="5e"+f:(r=t.toExponential(),r=r.slice(0,r.indexOf("e")+1)+f),i=new g(r)):i=new g(t+""),i.c[0]){for(f=i.e,t=f+u,t<3&&(t=0);;)if(n=i,i=o.times(n.plus(h(s,n,u,1))),q(n.c).slice(0,t)===(r=q(i.c)).slice(0,t))if(i.e<f&&--t,r=r.slice(t-3,t+1),r=="9999"||!l&&r=="4999"){if(!l&&(F(n,n.e+m+2,0),n.times(n).eq(s))){i=n;break}u+=4,t+=4,l=1}else{(!+r||!+r.slice(1)&&r.charAt(0)=="5")&&(F(i,i.e+m+2,1),e=!i.times(i).eq(s));break}}return F(i,i.e+m+1,S,e)},E.toExponential=function(e,r){return e!=null&&(I(e,0,$),e++),Ee(this,e,r,1)},E.toFixed=function(e,r){return e!=null&&(I(e,0,$),e=e+this.e+1),Ee(this,e,r)},E.toFormat=function(e,r,i){var l,n=this;if(i==null)e!=null&&r&&typeof r=="object"?(i=r,r=null):e&&typeof e=="object"?(i=e,e=r=null):i=he;else if(typeof i!="object")throw Error(C+"Argument not an object: "+i);if(l=n.toFixed(e,r),n.c){var s,c=l.split("."),t=+i.groupSize,f=+i.secondaryGroupSize,u=i.groupSeparator||"",o=c[0],a=c[1],w=n.s<0,N=w?o.slice(1):o,L=N.length;if(f&&(s=t,t=f,f=s,L-=s),t>0&&L>0){for(s=L%t||t,o=N.substr(0,s);s<L;s+=t)o+=u+N.substr(s,t);f>0&&(o+=u+N.slice(s)),w&&(o="-"+o)}l=a?o+(i.decimalSeparator||"")+((f=+i.fractionGroupSize)?a.replace(new RegExp("\\d{"+f+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):a):o}return(i.prefix||"")+l+(i.suffix||"")},E.toFraction=function(e){var r,i,l,n,s,c,t,f,u,o,a,w,N=this,L=N.c;if(e!=null&&(t=new g(e),!t.isInteger()&&(t.c||t.s!==1)||t.lt(A)))throw Error(C+"Argument "+(t.isInteger()?"out of range: ":"not an integer: ")+Y(t));if(!L)return new g(N);for(r=new g(A),u=i=new g(A),l=f=new g(A),w=q(L),s=r.e=w.length-N.e-1,r.c[0]=ae[(c=s%O)<0?O+c:c],e=!e||t.comparedTo(r)>0?s>0?r:u:t,c=H,H=1/0,t=new g(w),f.c[0]=0;o=h(t,r,0,1),n=i.plus(o.times(l)),n.comparedTo(e)!=1;)i=l,l=n,u=f.plus(o.times(n=u)),f=n,r=t.minus(o.times(n=r)),t=n;return n=h(e.minus(i),l,0,1),f=f.plus(n.times(u)),i=i.plus(n.times(l)),f.s=u.s=N.s,s=s*2,a=h(u,l,s,S).minus(N).abs().comparedTo(h(f,i,s,S).minus(N).abs())<1?[u,l]:[f,i],H=c,a},E.toNumber=function(){return+Y(this)},E.toPrecision=function(e,r){return e!=null&&I(e,1,$),Ee(this,e,r,2)},E.toString=function(e){var r,i=this,l=i.s,n=i.e;return n===null?l?(r="Infinity",l<0&&(r="-"+r)):r="NaN":(e==null?r=n<=x||n>=G?se(q(i.c),n):k(q(i.c),n,"0"):e===10&&ge?(i=F(new g(i),m+n+1,S),r=k(q(i.c),i.e,"0")):(I(e,2,b.length,"Base"),r=p(k(q(i.c),n,"0"),10,e,l,!0)),l<0&&i.c[0]&&(r="-"+r)),r},E.valueOf=E.toJSON=function(){return Y(this)},E._isBigNumber=!0,E[Symbol.toStringTag]="BigNumber",E[Symbol.for("nodejs.util.inspect.custom")]=E.valueOf,d!=null&&g.set(d),g}function y(d){var h=d|0;return d>0||d===h?h:h-1}function q(d){for(var h,p,R=1,E=d.length,A=d[0]+"";R<E;){for(h=d[R++]+"",p=O-h.length;p--;h="0"+h);A+=h}for(E=A.length;A.charCodeAt(--E)===48;);return A.slice(0,E+1||1)}function ee(d,h){var p,R,E=d.c,A=h.c,m=d.s,S=h.s,x=d.e,G=h.e;if(!m||!S)return null;if(p=E&&!E[0],R=A&&!A[0],p||R)return p?R?0:-S:m;if(m!=S)return m;if(p=m<0,R=x==G,!E||!A)return R?0:!E^p?1:-1;if(!R)return x>G^p?1:-1;for(S=(x=E.length)<(G=A.length)?x:G,m=0;m<S;m++)if(E[m]!=A[m])return E[m]>A[m]^p?1:-1;return x==G?0:x>G^p?1:-1}function I(d,h,p,R){if(d<h||d>p||d!==Z(d))throw Error(C+(R||"Argument")+(typeof d=="number"?d<h||d>p?" out of range: ":" not an integer: ":" not a primitive number: ")+String(d))}function fe(d){var h=d.c.length-1;return y(d.e/O)==h&&d.c[h]%2!=0}function se(d,h){return(d.length>1?d.charAt(0)+"."+d.slice(1):d)+(h<0?"e":"e+")+h}function k(d,h,p){var R,E;if(h<0){for(E=p+".";++h;E+=p);d=E+d}else if(R=d.length,++h>R){for(E=p,h-=R;--h;E+=p);d+=E}else h<R&&(d=d.slice(0,h)+"."+d.slice(h));return d}var oe=Oe();const Re=/^[1][3,4,5,6,7,8,9][0-9]{9}$/,Ae=(d,h,p)=>{Re.test(h)||h.length==0?p():p(new Error("请输入正确的手机号"))},_e=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,me=(d,h,p)=>{_e.test(h)?p():p(new Error("请输入正确的邮箱"))},Le=/(^[1-9]\d{5}(18|19|([23]\d))\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$|^[1-9]\d{5}\d{2}((0[1-9])|(10|11|12))(([0-2][1-9])|10|20|30|31)\d{2}$)/,Pe=(d,h,p)=>{Le.test(h.toString())?p():p(new Error("请输入正确的身份证号"))},Te=(d,h,p)=>{h&&isNaN(Number(h))?p(new Error("该项需填入数字")):p()},Ie=({min:d=0,max:h=100,message:p=""})=>{function R(E,A,m){(!A&&A!==0||typeof A>"u")&&m(),A&&isNaN(Number(A))?m(new Error("该项需填写数字")):new oe(A).isGreaterThanOrEqualTo(d)&&new oe(A).isLessThanOrEqualTo(h)?m():m(new Error(p||`该项需填写${d}~${h}的数字`))}return[{validator:R,trigger:"change,blur"}]},W={MIN:6,MAX:16},Se=(d,h,p)=>{const R=new RegExp(`^[\\d\\w]{${W.MIN},${W.MAX}}$`);h&&R.test(h.toString())?p():p(new Error(`密码长度${W.MIN}-${W.MAX}位`))},ve=/^(?![\d]+$)(?![a-zA-Z]+$)(?![!@#$%^&*()]+$)[\da-zA-Z!@#$%^&*()]{6,16}$/,Xe=(d,h,p)=>{h&&ve.test(h)?p():p(new Error(`密码长度${W.MIN}-${W.MAX}位，由字母、数字、符号，至少两种组合而成`))},Me=(d,h,p)=>{const R=new RegExp(`^(?![A-z]+$)(?![A-Z0-9]+$)(?![A-Z\\W_]+$)(?![a-z0-9]+$)(?![a-z\\W_]+$)(?![0-9\\W_]+$)[a-zA-Z0-9\\W_]{${W.MIN},${W.MAX}}$`);h&&R.test(h.toString())?p():p(new Error(`密码长度${W.MIN}-${W.MAX}位，且需包含数字、大写字母、小写字母以及特殊字符中的三种`))},Ue=(d,h,p)=>{const R=h.split(",");let E=!0;R.forEach(A=>{/^\d+$/.test(A)&&1<=Number(A)&&Number(A)<=65535||(E=!1)}),E?p():p(new Error("端口格式不对"))},$e=/^[A-Z]{1}$/,Be=(d,h,p)=>{$e.test(h)?p():p(new Error("首字母必须为大写且长度为1位!"))},De=/^((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}$/,Ce=(d,h,p)=>{De.test(h)?p():p(new Error("IP格式不正确!"))},xe=d=>{let h=d;isNaN(h)&&(h=2);const p=new RegExp(`^(([1-9][0-9]*)|(([0]\\.\\d{1,${h}}|[1-9][0-9]*\\.\\d{1,${h}})))$`);function R(E,A,m){!A||p.test(A.toString())?m():m(new Error(`最多精确到${h}位小数`))}return[{validator:R,trigger:"change,blur"}]},Ge=/^[a-zA-Z0-9]+$/g,ye=(d,h,p)=>{!h||Ge.test(h)?p():p(new Error("只能填写英文和数字"))},qe=(d,h,p)=>{new oe(h).isGreaterThanOrEqualTo(0)&&new oe(h).isLessThanOrEqualTo(1)?p():p(new Error("只能填写0~1的数值"))},Fe=(d,h,p)=>{h&&!isNaN(Number(h))&&h.toString().length==6?p():p(new Error("口令码为 6 位数字"))},re=["blur","change"],We={COMMON_RULE:d=>[{message:"该项为必填项",type:"string",required:!0,trigger:re,...d}],DEEP_RULE:d=>({type:"object",fields:{},required:!0,...d}),BLUR_RULE:d=>[{message:"该项为必填项",type:"string",required:!0,trigger:"blur",...d}],LENGTH_RULE:(d,h=20,p)=>[{min:d,max:h,message:p||`输入长度限制在${d==h?d:[d,h].join("至")}个字符`,trigger:"blur"}],LETTER_NUM_RULE:[{validator:ye,trigger:"blur"}],LESS_THAN_ONE:[{validator:qe,trigger:"blur"}],FLOAT_NUMBER_RULE:xe,INT_RANGE:Ie,ARRAY_RULE:[{type:"array",message:"该项是多项选择",trigger:re}],NUMBER_RULE:[{validator:Te,trigger:re}],PORT_RULE:[{validator:Ue,trigger:"blur"}],EMAIL_RULE:[{validator:me,trigger:"blur"}],IP_RULE:[{validator:Ce,trigger:"blur"}],PASSWORD_RULE:[{validator:Se,trigger:"blur"}],STRICT_PASSWORD_RULE:[{validator:Me,trigger:"blur"}],ONE_CAPITAL_RULE:[{validator:Be,trigger:re}],PHONE_RULE:[{validator:Ae,trigger:re}],IDCARD_RULE:[{validator:Pe,trigger:re}],TOTP_RULE:[{validator:Fe,trigger:"blur"}]};P.ComplicatedPasswordRegExp=ve,P.EmailRegExp=_e,P.FirstLetterUppercaseRegExp=$e,P.IPRegExp=De,P.IdentifyRegExp=Le,P.LetterNumberRegExp=Ge,P.PASSWORD_LEN_RANGE=W,P.PhoneRegExp=Re,P.default=We,P.floatPosition=xe,P.intRange=Ie,P.lessThanOne=qe,P.letterNumber=ye,P.password=Xe,P.strictValidatePassword=Me,P.totpCode=Fe,P.validateEmail=me,P.validateIP=Ce,P.validateIdentityCard=Pe,P.validateJhiInitial=Be,P.validateNumber=Te,P.validatePassword=Se,P.validatePhone=Ae,P.validatePort=Ue,Object.defineProperties(P,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
